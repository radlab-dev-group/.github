<section class="optimization-section">
    <div class="container">
        <h2>Maksymalne Wykorzystanie ZasobÃ³w</h2>
        <div class="graphic-container">
            <svg viewBox="0 0 480 200" role="img"
                 aria-label="Wizualizacja load balancera"
                 xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet">
                <title>Wizualizacja load balancera</title>
                <!-- Load balancer visualization -->
                <defs>
                    <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="0%">
                        <stop offset="0%" style="stop-color:#7ea1ff;stop-opacity:0.7"/>
                        <stop offset="100%" style="stop-color:#a07be6;stop-opacity:0.7"/>
                    </linearGradient>
                </defs>

                <!-- Central router -->
                <circle cx="240" cy="100" r="25" fill="url(#grad1)"
                        stroke="#88c0ff" stroke-width="2"/>
                <text x="240" y="107" text-anchor="middle" font-size="16"
                      font-weight="bold">LB
                </text>

                <!-- Four servers with load indicators -->
                <g transform="translate(100, 60)">
                    <rect x="0" y="0" width="40" height="30" rx="4"
                          fill="rgba(126,161,255,0.22)" stroke="#7ea1ff"
                          stroke-width="2"/>
                    <rect x="5" y="5" width="5" height="5" fill="#7ea1ff"/>
                    <rect x="5" y="13" width="5" height="5" fill="#7ea1ff"/>
                    <rect x="5" y="21" width="5" height="5"
                          fill="#7ea1ff" opacity="0.3"/>
                    <text x="20" y="45" text-anchor="middle" font-size="11"
                          font-weight="700">API-1
                    </text>
                    <line x1="20" y1="30" x2="20" y2="35"
                          stroke="#7ea1ff" stroke-width="1.7"/>
                </g>

                <g transform="translate(340, 60)">
                    <rect x="0" y="0" width="40" height="30" rx="4"
                          fill="rgba(160,123,230,0.22)" stroke="#a07be6"
                          stroke-width="2"/>
                    <rect x="5" y="5" width="5" height="5" fill="#a07be6"/>
                    <rect x="5" y="13" width="5" height="5" fill="#a07be6"/>
                    <rect x="5" y="21" width="5" height="5" fill="#a07be6"/>
                    <text x="20" y="45" text-anchor="middle" font-size="11"
                          font-weight="700">API-2
                    </text>
                    <line x1="20" y1="30" x2="20" y2="35"
                          stroke="#a07be6" stroke-width="1.7"/>
                </g>

                <g transform="translate(100, 130)">
                    <rect x="0" y="0" width="40" height="30" rx="4"
                          fill="rgba(126,161,255,0.18)" stroke="#7ea1ff"
                          stroke-width="2"/>
                    <rect x="5" y="5" width="5" height="5" fill="#7ea1ff"/>
                    <rect x="5" y="13" width="5" height="5" fill="#7ea1ff"
                          opacity="0.3"/>
                    <rect x="5" y="21" width="5" height="5" fill="#7ea1ff"
                          opacity="0.15"/>
                    <text x="20" y="55" text-anchor="middle" font-size="11"
                          font-weight="700">API-3
                    </text>
                    <line x1="20" y1="30" x2="20" y2="35"
                          stroke="#7ea1ff" stroke-width="1.7"/>
                </g>

                <g transform="translate(340, 130)">
                    <rect x="0" y="0" width="40" height="30" rx="4"
                          fill="rgba(160,123,230,0.18)" stroke="#a07be6"
                          stroke-width="2"/>
                    <rect x="5" y="5" width="5" height="5" fill="#a07be6"
                          opacity="0.6"/>
                    <rect x="5" y="13" width="5" height="5" fill="#a07be6"
                          opacity="0.35"/>
                    <rect x="5" y="21" width="5" height="5" fill="#a07be6"
                          opacity="0.15"/>
                    <text x="20" y="55" text-anchor="middle" font-size="11"
                          font-weight="700">API-4
                    </text>
                    <line x1="20" y1="30" x2="20" y2="35"
                          stroke="#a07be6" stroke-width="1.7"/>
                </g>

                <!-- Animated flow lines -->
                <line x1="120" y1="75" x2="215" y2="95"
                      stroke="#7ea1ff" stroke-width="1.7" opacity="0.75">
                    <animate attributeName="opacity"
                             values="0.25;0.9;0.25" dur="1.6s"
                             repeatCount="indefinite"/>
                </line>
                <line x1="360" y1="75" x2="265" y2="95"
                      stroke="#a07be6" stroke-width="1.7" opacity="0.75">
                    <animate attributeName="opacity"
                             values="0.25;0.9;0.25" dur="1.6s"
                             repeatCount="indefinite"/>
                </line>
                <line x1="120" y1="130" x2="215" y2="110"
                      stroke="#7ea1ff" stroke-width="1.7" opacity="0.75">
                    <animate attributeName="opacity"
                             values="0.25;0.9;0.25" dur="1.6s"
                             begin="0.75s" repeatCount="indefinite"/>
                </line>
                <line x1="360" y1="130" x2="265" y2="110"
                      stroke="#a07be6" stroke-width="1.7" opacity="0.75">
                    <animate attributeName="opacity"
                             values="0.25;0.9;0.25" dur="1.6s"
                             begin="0.75s" repeatCount="indefinite"/>
                </line>

                <!-- Load percentage indicators -->
                <text x="120" y="15" font-size="10" font-weight="800">100%</text>
                <text x="360" y="15" font-size="10" font-weight="800">95%</text>
                <text x="120" y="190" font-size="10" font-weight="800">45%</text>
                <text x="360" y="190" font-size="10" font-weight="800">70%</text>
            </svg>
        </div>

        <p style="text-align:center;max-width:800px;margin:0 auto 28px;font-size:1.06rem;color:var(--text-secondary);">
            <strong>llm-router</strong> nie tylko chroni dane, ale takÅ¼e inteligentnie zarzÄ…dza ruchem,
            zapewniajÄ…c optymalnÄ… wydajnoÅ›Ä‡ i dostÄ™pnoÅ›Ä‡.
        </p>

        <div class="optimization-grid"
             style="display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:22px;">
            <div class="optimization-card">
                <h3>ğŸ¯ Strategie Load Balancingu</h3>
                <ul class="strategy-list">
                    <li><strong>balanced (default)</strong> â€“ rÃ³wnomierna dystrybucja requestÃ³w miÄ™dzy providerami.</li>
                    <li><strong>weighted</strong> â€“ statyczne wagi dla providerÃ³w.</li>
                    <li><strong>dynamic_weighted</strong> â€“ wagi + tracking latencji.</li>
                    <li><strong>first_available</strong> â€“ natychmiastowa obsÅ‚uga przez pierwszego dostÄ™pnego providera.
                    </li>
                </ul>
            </div>

            <div class="optimization-card">
                <h3>âš™ï¸ Multiâ€‘Provider Support</h3>
                <p>Jeden model moÅ¼e mieÄ‡ wielu providerÃ³w (vLLM, Ollama, OpenAI). Automatyczne failover w przypadku
                    niedostÄ™pnoÅ›ci. Konfiguracja przez JSON z dynamicznym reloadem.</p>
            </div>

            <div class="optimization-card">
                <h3>ğŸ”„ Inteligentny Routing</h3>
                <p><code>ProviderChooser</code> deleguje do konfigurowalnej strategii. <code>ModelHandler</code>
                    Å‚aduje definicje w runtime. Åatwa zamiana strategii bez zmian w kodzie.</p>
            </div>

            <div class="optimization-card">
                <h3>ğŸ“ˆ Scaling i Performance</h3>
                <p>Gunicorn z konfigurowalnymi workers i threads. Waitress dla Windows. Opcjonalny worker class.
                    Timeouty na poziomie router i external API.</p>
            </div>

            <div class="optimization-card">
                <h3>ğŸ’¾ Redis Integration</h3>
                <p>WspÃ³Å‚dzielony stan dla first_available strategy. Tracking wykorzystania providerÃ³w w multiâ€‘worker
                    environment. Atomic operations dla consistency.</p>
            </div>

            <div class="optimization-card">
                <h3>ğŸš¦ Health Checks</h3>
                <p><code>/ping</code> endpoint dla uptime monitoring. <code>/tags</code> dla dostÄ™pnych modeli i
                    metadata. Automatic endpoint discovery i registration.</p>
            </div>
        </div>
    </div>
</section>