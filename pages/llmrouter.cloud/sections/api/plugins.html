<section class="tech-section" id="plugins"
         style="background-color: #020617; padding: 4rem 0; font-family: system-ui, -apple-system, sans-serif; color: #e2e8f0; position: relative; overflow: hidden;">

    <div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: radial-gradient(circle at 50% 10%, rgba(56, 189, 248, 0.1), transparent 50%); pointer-events: none;"></div>
    <div class="plugin-container">
        <div class="section-header">
            <h2 class="section-title">Plugins & Security</h2>
            <p class="section-subtitle">Extendable pipeline architecture for safety and privacy</p>
        </div>

        <div class="plugin-grid">

            <!-- 1. Guardrails -->
            <div class="plugin-card accent-blue">
                <div class="card-header">
                    <div class="icon-box" style="color: #38bdf8;">üõ°Ô∏è</div>
                    <span class="badge badge-blue">Security Layer</span>
                </div>
                <div>
                    <h3 class="card-title">Guardrail Pipelines</h3>
                    <p class="card-desc">
                        First line of defense. Validates content safety before processing using sequential plugins to
                        block unsafe requests.
                    </p>
                    <ul class="feature-list">
                        <li><strong>Pipeline Architecture:</strong> Sequential validation plugins</li>
                        <li><strong>NASK Guard:</strong> PL-Guard model integration (CC BY-NC-SA 4.0)</li>
                        <li><strong>Custom Plugins:</strong> Extend via <code>HttpPluginInterface</code></li>
                    </ul>
                </div>

                <div class="terminal">
                    <div class="terminal-header">
                        <div class="dot dot-r"></div>
                        <div class="dot dot-y"></div>
                        <div class="dot dot-g"></div>
                    </div>
                    <div class="terminal-body">
                        <div class="t-comment"># Configure guardrail pipeline</div>
                        <div><span class="t-cmd">export</span> <span class="t-var">GUARDRAIL_PLUGINS</span>=<span
                                class="t-str">"nask_guard,custom_filter"</span></div>
                        <div><span class="t-cmd">export</span> <span class="t-var">NASK_GUARD_HOST</span>=<span
                                class="t-str">"http://localhost:8080"</span></div>
                        <br>
                        <div class="t-comment"># 1. NASK Guard validates content</div>
                        <div class="t-comment"># 2. Custom filter applies rules</div>
                        <div class="t-comment"># Unsafe content ‚Üí Request Blocked üö´</div>
                    </div>
                </div>
            </div>

            <!-- 2. Masking -->
            <div class="plugin-card accent-purple">
                <div class="card-header">
                    <div class="icon-box" style="color: #c084fc;">üîí</div>
                    <span class="badge badge-purple">Privacy Layer</span>
                </div>
                <div>
                    <h3 class="card-title">Masking Pipelines</h3>
                    <p class="card-desc">
                        Automatically detects and anonymizes sensitive PII data before transmission to LLM providers.
                    </p>
                    <ul class="feature-list">
                        <li><strong>FastMasker:</strong> High-performance PII detection (15+ types)</li>
                        <li><strong>Rule Types:</strong> PESEL, NIP, Emails, Phones, Credit Cards</li>
                        <li><strong>Validation:</strong> Checksum validation for PL identifiers</li>
                    </ul>
                </div>

                <div class="terminal">
                    <div class="terminal-header">
                        <div class="dot dot-r"></div>
                        <div class="dot dot-y"></div>
                        <div class="dot dot-g"></div>
                    </div>
                    <div class="terminal-body">
                        <div class="t-comment"># Enable masking pipeline</div>
                        <div><span class="t-cmd">export</span> <span class="t-var">FORCE_MASKING</span>=<span
                                class="t-str">1</span></div>
                        <div><span class="t-cmd">export</span> <span class="t-var">MASKER_PLUGINS</span>=<span
                                class="t-str">"fast_masker"</span></div>
                        <br>
                        <div class="t-comment"># Input: "PESEL: 44051401359"</div>
                        <div><span class="t-comment"># Output:</span> "PESEL: <span class="t-var">{{PESEL}}</span>"
                        </div>
                    </div>
                </div>
            </div>

            <!-- 3. Architecture -->
            <div class="plugin-card accent-green">
                <div class="card-header">
                    <div class="icon-box" style="color: #4ade80;">üîß</div>
                    <span class="badge badge-green">Developers</span>
                </div>
                <div>
                    <h3 class="card-title">Plugin Architecture</h3>
                    <p class="card-desc">
                        Unified interface for both Guardrails and Maskers. Easily extend the system with your own logic.
                    </p>
                    <ul class="feature-list">
                        <li><strong>PluginInterface:</strong> Base class with <code>apply(payload)</code></li>
                        <li><strong>Registry Pattern:</strong> Automatic discovery & registration</li>
                        <li><strong>Graceful Degradation:</strong> Safe error handling for plugins</li>
                    </ul>
                </div>

                <div class="terminal">
                    <div class="terminal-header">
                        <div class="dot dot-r"></div>
                        <div class="dot dot-y"></div>
                        <div class="dot dot-g"></div>
                    </div>
                    <div class="terminal-body">
                        <div><span class="t-py-kw">class</span> <span class="t-py-cls">MyGuard</span>(HttpPluginInterface):
                        </div>
                        <div style="padding-left: 1rem;">name = <span class="t-str">"my_guard"</span></div>
                        <br>
                        <div style="padding-left: 1rem;"><span class="t-py-kw">def</span> <span
                                class="t-py-cls">apply</span>(self, payload):
                        </div>
                        <div style="padding-left: 2rem;">is_safe = check(payload)</div>
                        <div style="padding-left: 2rem;"><span class="t-py-kw">return</span> is_safe, {}</div>
                    </div>
                </div>
            </div>

            <!-- 4. Configuration -->
            <div class="plugin-card accent-orange">
                <div class="card-header">
                    <div class="icon-box" style="color: #fb923c;">‚öôÔ∏è</div>
                    <span class="badge badge-orange">DevOps</span>
                </div>
                <div>
                    <h3 class="card-title">Configuration</h3>
                    <p class="card-desc">
                        Full 12-factor app compliance. Everything is configured via environment variables for flexible
                        deployment.
                    </p>
                    <ul class="feature-list">
                        <li><strong>Env Vars:</strong> No code changes required</li>
                        <li><strong>Flexible Order:</strong> Define plugin sequence via strings</li>
                        <li><strong>Per-Endpoint:</strong> Toggle security rules for specific routes</li>
                    </ul>
                </div>

                <div class="terminal">
                    <div class="terminal-header">
                        <div class="dot dot-r"></div>
                        <div class="dot dot-y"></div>
                        <div class="dot dot-g"></div>
                    </div>
                    <div class="terminal-body">
                        <div class="t-comment"># Full security config example</div>
                        <div><span class="t-cmd">export</span> <span class="t-var">GUARDRAIL_PLUGINS</span>=<span
                                class="t-str">"nask_guard"</span></div>
                        <div><span class="t-cmd">export</span> <span class="t-var">FORCE_MASKING</span>=<span
                                class="t-str">1</span></div>
                        <div><span class="t-cmd">export</span> <span class="t-var">MASKER_PLUGINS</span>=<span
                                class="t-str">"fast_masker"</span></div>
                        <br>
                        <div class="t-comment"># 1. Validate -> 2. Mask -> 3. Send</div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</section>